{"ast":null,"code":"import YesNoSelect from'./YesNoSelect';// Import the correct component\nimport{useParams}from'react-router-dom';import'./styles/DealDetail.css';// Assuming you have a DealDetail.css for styling\nimport React,{useEffect,useState}from'react';import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DealDetail=()=>{const{id}=useParams();// Get the deal ID from URL\nconst[deal,setDeal]=useState(null);// Store the deal data\nconst[loading,setLoading]=useState(true);// Loading state\nconst[stages,setStages]=useState([]);// To store the stages information\nconst[selectedStage,setSelectedStage]=useState(null);useEffect(()=>{// Fetch deal details by ID\naxios.get(`http://localhost:8080/api/deals/${id}`).then(response=>{console.log(\"Deal Data: \",response.data);// Debugging log\nsetDeal(response.data);setLoading(false);setSelectedStage(response.data.stage.id);// Set the current stage as the selected stage\n}).catch(error=>console.error('Error fetching deal:',error));setLoading(false);// Fetch all stages for the dropdown\naxios.get('http://localhost:8080/api/stages').then(response=>{console.log(\"Stages Data: \",response.data);// Debugging log\nsetStages(response.data);// Populate stages\n}).catch(error=>console.error('Error fetching stages:',error));},[id]);const handleStageChange=event=>{setSelectedStage(event.target.value);// Update selected stage\n};const updateStage=()=>{axios.put(`http://localhost:8080/api/deals/${id}/stage`,selectedStage,{headers:{'Content-Type':'application/json'}}).then(response=>{setDeal(response.data);// Update deal in the UI after stage update\nalert('Stage updated successfully!');}).catch(error=>{console.error('Error updating stage:',error);alert('Failed to update stage.');});};if(loading){return/*#__PURE__*/_jsx(\"p\",{children:\"Loading deal data...\"});// Show loading message while fetching\n}if(!deal){console.log(\"Deal not found yet, still loading...\");return/*#__PURE__*/_jsx(\"div\",{children:\"Loading deal details...\"});// If no deal is found, show an error message\n}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Deal Details: \",deal.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Amount: $\",deal.amount]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Current Stage: \",deal.stage.name]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"stageSelect\",children:\"Move to Stage:\"}),/*#__PURE__*/_jsx(\"select\",{id:\"stageSelect\",value:selectedStage,onChange:handleStageChange,children:stages.map(stage=>/*#__PURE__*/_jsx(\"option\",{value:stage.id,children:stage.name},stage.id))}),/*#__PURE__*/_jsx(\"button\",{onClick:updateStage,children:\"Update Stage\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"deal-action-items\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Action Items\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"Order Review Approved: \",deal.orderReviewApproved?'Yes':'No']}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Local Order Placeholder: \",deal.localOrderPlaceholder||'Not provided']}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Customer Questionnaire Completed: \",deal.customerQuestionnaireCompleted?'Yes':'No']}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Schedule Confirmed: \",deal.scheduleConfirmed?'Yes':'No']}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Billing Complete: \",deal.billingComplete?'Yes':'No']}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Funding Complete: \",deal.fundingComplete?'Yes':'No']}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Submitted for Payroll: \",deal.submittedForPayroll?'Yes':'No']}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Pending Final Approval: \",deal.pendingFinalApproval?'Yes':'No']}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Being Paid: \",deal.beingPaid?'Yes':'No']})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"deal-focus-history\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"deal-focus\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Focus\"}),/*#__PURE__*/_jsx(\"p\",{children:\"No focus items yet. Scheduled activities, pinned notes, email drafts, and scheduled emails will appear here.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"deal-history\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"History\"}),/*#__PURE__*/_jsx(\"p\",{children:\"No notes added yet. Add notes, emails, or activities to see them here.\"})]})]})]});};export default DealDetail;","map":{"version":3,"names":["YesNoSelect","useParams","React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","DealDetail","id","deal","setDeal","loading","setLoading","stages","setStages","selectedStage","setSelectedStage","get","then","response","console","log","data","stage","catch","error","handleStageChange","event","target","value","updateStage","put","headers","alert","children","name","amount","htmlFor","onChange","map","onClick","className","orderReviewApproved","localOrderPlaceholder","customerQuestionnaireCompleted","scheduleConfirmed","billingComplete","fundingComplete","submittedForPayroll","pendingFinalApproval","beingPaid"],"sources":["C:/Workspace/oqs/deal-manager/src/components/DealDetail.js"],"sourcesContent":["import YesNoSelect from './YesNoSelect';  // Import the correct component\r\nimport { useParams } from 'react-router-dom';\r\nimport './styles/DealDetail.css'; // Assuming you have a DealDetail.css for styling\r\nimport React, { useEffect, useState } from 'react';\r\nimport axios from \"axios\";\r\n\r\nconst DealDetail = () => {\r\n    const { id } = useParams(); // Get the deal ID from URL\r\n    const [deal, setDeal] = useState(null); // Store the deal data\r\n    const [loading, setLoading] = useState(true); // Loading state\r\n    const [stages, setStages] = useState([]); // To store the stages information\r\n    const [selectedStage, setSelectedStage] = useState(null);\r\n\r\n    useEffect(() => {\r\n        // Fetch deal details by ID\r\n        axios.get(`http://localhost:8080/api/deals/${id}`)\r\n            .then(response => {\r\n                console.log(\"Deal Data: \", response.data); // Debugging log\r\n                setDeal(response.data);\r\n                setLoading(false);\r\n                setSelectedStage(response.data.stage.id); // Set the current stage as the selected stage\r\n            })\r\n            .catch(error => console.error('Error fetching deal:', error));\r\n                setLoading(false);\r\n\r\n        // Fetch all stages for the dropdown\r\n        axios.get('http://localhost:8080/api/stages')\r\n            .then(response => {\r\n                console.log(\"Stages Data: \", response.data); // Debugging log\r\n                setStages(response.data); // Populate stages\r\n            })\r\n            .catch(error => console.error('Error fetching stages:', error));\r\n    }, [id]);\r\n\r\n\r\n    const handleStageChange = (event) => {\r\n        setSelectedStage(event.target.value); // Update selected stage\r\n    };\r\n\r\n    const updateStage = () => {\r\n        axios.put(`http://localhost:8080/api/deals/${id}/stage`, selectedStage, {\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        })\r\n            .then(response => {\r\n                setDeal(response.data); // Update deal in the UI after stage update\r\n                alert('Stage updated successfully!');\r\n            })\r\n            .catch(error => {\r\n                console.error('Error updating stage:', error);\r\n                alert('Failed to update stage.');\r\n            });\r\n    };\r\n\r\n\r\n\r\n\r\n    if (loading) {\r\n        return <p>Loading deal data...</p>; // Show loading message while fetching\r\n    }\r\n\r\n    if (!deal) {\r\n        console.log(\"Deal not found yet, still loading...\");\r\n        return <div>Loading deal details...</div>;// If no deal is found, show an error message\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h2>Deal Details: {deal.name}</h2>\r\n            <p>Amount: ${deal.amount}</p>\r\n            <p>Current Stage: {deal.stage.name}</p>\r\n\r\n            <div>\r\n                <label htmlFor=\"stageSelect\">Move to Stage:</label>\r\n                <select\r\n                    id=\"stageSelect\"\r\n                    value={selectedStage}\r\n                    onChange={handleStageChange}\r\n                >\r\n                    {stages.map(stage => (\r\n                        <option key={stage.id} value={stage.id}>\r\n                            {stage.name}\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n                <button onClick={updateStage}>Update Stage</button>\r\n            </div>\r\n\r\n            <div className=\"deal-action-items\">\r\n                <h3>Action Items</h3>\r\n                <ul>\r\n                    <li>Order Review Approved: {deal.orderReviewApproved ? 'Yes' : 'No'}</li>\r\n                    <li>Local Order Placeholder: {deal.localOrderPlaceholder || 'Not provided'}</li>\r\n                    <li>Customer Questionnaire Completed: {deal.customerQuestionnaireCompleted ? 'Yes' : 'No'}</li>\r\n                    <li>Schedule Confirmed: {deal.scheduleConfirmed ? 'Yes' : 'No'}</li>\r\n                    <li>Billing Complete: {deal.billingComplete ? 'Yes' : 'No'}</li>\r\n                    <li>Funding Complete: {deal.fundingComplete ? 'Yes' : 'No'}</li>\r\n                    <li>Submitted for Payroll: {deal.submittedForPayroll ? 'Yes' : 'No'}</li>\r\n                    <li>Pending Final Approval: {deal.pendingFinalApproval ? 'Yes' : 'No'}</li>\r\n                    <li>Being Paid: {deal.beingPaid ? 'Yes' : 'No'}</li>\r\n                </ul>\r\n            </div>\r\n\r\n            {/* Center Pane: Focus and History */}\r\n            <div className=\"deal-focus-history\">\r\n                <div className=\"deal-focus\">\r\n                    <h3>Focus</h3>\r\n                    <p>No focus items yet. Scheduled activities, pinned notes, email drafts, and scheduled emails will\r\n                        appear here.</p>\r\n                </div>\r\n                <div className=\"deal-history\">\r\n                    <h3>History</h3>\r\n                    <p>No notes added yet. Add notes, emails, or activities to see them here.</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DealDetail;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}